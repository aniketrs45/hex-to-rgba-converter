<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RGBA Hex Converter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
  </style>
</head>
<body class="bg-[#0f172a] text-white min-h-screen flex flex-col">

  <main class="flex-grow flex flex-col md:flex-row gap-6 px-4 py-10 max-w-5xl mx-auto">

    <!-- Left Panel -->
    <div class="w-full md:w-1/2 space-y-4">
      <h1 class="text-2xl font-bold text-cyan-300 mb-2">RGBA Hex Converter</h1>
      <p class="text-sm text-gray-400 mb-4">Convert hex colors to RGBA format with opacity control</p>

      <label class="block text-sm font-medium mb-1">Hex Color</label>
      <div class="flex items-center space-x-2">
        <span class="text-gray-400">#</span>
        <input id="hexInput" type="text" placeholder="3B82F6"
          class="flex-1 p-2 rounded-md bg-gray-700 text-white border border-gray-600 focus:ring-2 focus:ring-cyan-400 outline-none"
          value="3B82F6" />
      </div>

      <label class="block text-sm font-medium mt-4 mb-1">Opacity (%)</label>
      <div class="relative">
        <input id="opacityInput" type="number" min="0" max="100" value="80"
          class="w-full p-2 rounded-md bg-gray-700 text-white border border-gray-600 focus:ring-2 focus:ring-cyan-400 outline-none" />
        <span class="absolute top-1/2 right-3 -translate-y-1/2 text-sm text-gray-400">%</span>
      </div>

      <div class="mt-4">
        <label class="block text-sm font-medium">Alpha Hex (AA)</label>
        <div id="alphaHex" class="mt-1 bg-gray-700 text-cyan-300 p-2 rounded-md font-mono text-center">FF</div>
      </div>

      <div class="mt-4">
        <label class="block text-sm font-medium">RGBA Hex Code (#RRGGBBAA)</label>
        <div class="relative">
          <div id="rgbaHex" class="mt-1 bg-gray-900 text-cyan-400 p-3 text-center rounded-md font-mono text-xl border border-cyan-400">#3B82F6CC</div>
          <button onclick="copyToClipboard()" class="absolute top-1 right-2 text-sm text-cyan-400 hover:underline">Copy</button>
        </div>
      </div>
    </div>

    <!-- Right Panel -->
    <div class="flex-1 pt-6">
      <div class="mb-4 flex justify-between items-center">
        <h2 class="block text-sm font-medium text-gray-300 mb-1">Live Preview</h2>
        <button id="randomBtn" class="px-3 py-1 bg-cyan-600 hover:bg-cyan-700 text-white text-xs rounded-md">Random</button>
      </div>
      <div id="previewBox" class="w-full h-[264px] rounded-md flex items-center justify-center bg-[#3B82F6] text-white font-semibold text-xl">
        #3B82F6 at 80% <br/> Click to copy color
      </div>
      <div class="mt-4 p-4 bg-transparent rounded-md text-sm text-[#94A3B8] grid grid-cols-2 gap-4">
        <p><strong>HSL:</strong> <span id="hslText">217°, 91%, 60%</span></p>
        <p><strong>CMYK:</strong> <span id="cmykText">76%, 47%, 0%, 4%</span></p>
      </div>
    </div>

  </main>

  <!-- Script -->
  <script>
    const hexInput = document.getElementById("hexInput");
    const opacityInput = document.getElementById("opacityInput");
    const alphaHex = document.getElementById("alphaHex");
    const rgbaHex = document.getElementById("rgbaHex");
    const previewBox = document.getElementById("previewBox");
    const hslText = document.getElementById("hslText");
    const cmykText = document.getElementById("cmykText");

    function convertToAlphaHex(opacity) {
      const alpha = Math.round((opacity / 100) * 255);
      return alpha.toString(16).padStart(2, '0').toUpperCase();
    }

    function hexToRgb(hex) {
      const normalized = hex.length === 3
        ? hex.split('').map(c => c + c).join('')
        : hex;
      const bigint = parseInt(normalized, 16);
      return {
        r: (bigint >> 16) & 255,
        g: (bigint >> 8) & 255,
        b: bigint & 255
      };
    }

    function rgbToHsl(r, g, b) {
      r /= 255; g /= 255; b /= 255;
      const max = Math.max(r, g, b), min = Math.min(r, g, b);
      let h, s, l = (max + min) / 2;

      if (max === min) {
        h = s = 0;
      } else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch (max) {
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
      }
      return [
        Math.round(h * 360),
        Math.round(s * 100),
        Math.round(l * 100)
      ];
    }

    function rgbToCmyk(r, g, b) {
      if ((r === 0) && (g === 0) && (b === 0)) {
        return [0, 0, 0, 100];
      }
      const c = 1 - (r / 255);
      const m = 1 - (g / 255);
      const y = 1 - (b / 255);
      const minCMY = Math.min(c, Math.min(m, y));
      return [
        Math.round((c - minCMY) / (1 - minCMY) * 100),
        Math.round((m - minCMY) / (1 - minCMY) * 100),
        Math.round((y - minCMY) / (1 - minCMY) * 100),
        Math.round(minCMY * 100)
      ];
    }

    function updateResult() {
      let hex = hexInput.value.trim().replace(/^#/, '');
      if (!/^([0-9a-f]{6}|[0-9a-f]{3})$/i.test(hex)) {
        rgbaHex.textContent = 'Invalid hex';
        alphaHex.textContent = '--';
        previewBox.style.backgroundColor = 'transparent';
        previewBox.textContent = 'Invalid input';
        return;
      }

      const opacity = Math.min(Math.max(parseInt(opacityInput.value), 0), 100);
      const alpha = convertToAlphaHex(opacity);
      const normalizedHex = hex.length === 3
        ? hex.split('').map(c => c + c).join('')
        : hex;

      const rgb = hexToRgb(normalizedHex);
      const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
      const cmyk = rgbToCmyk(rgb.r, rgb.g, rgb.b);

      rgbaHex.textContent = `#${normalizedHex.toUpperCase()}${alpha}`;
      alphaHex.textContent = alpha;
      previewBox.style.backgroundColor = `#${normalizedHex}`;
      previewBox.textContent = `#${normalizedHex.toUpperCase()} at ${opacity}%\nClick to copy color`;

      hslText.textContent = `${hsl[0]}°, ${hsl[1]}%, ${hsl[2]}%`;
      cmykText.textContent = `${cmyk[0]}%, ${cmyk[1]}%, ${cmyk[2]}%, ${cmyk[3]}%`;
    }

    hexInput.addEventListener("input", updateResult);
    opacityInput.addEventListener("input", updateResult);

    function copyToClipboard() {
      navigator.clipboard.writeText(rgbaHex.textContent);
    }

    // Random button logic
    document.getElementById("randomBtn").addEventListener("click", () => {
      const letters = '0123456789ABCDEF';
      let color = '';
      for (let i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
      }
      hexInput.value = color;
      opacityInput.value = 80;
      updateResult();
    });

    updateResult();
  </script>
</body>
</html>
